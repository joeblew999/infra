

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Infrastructure Management System</title>
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <script type="module" src="https://cdn.jsdelivr.net/gh/starfederation/datastar@main/bundles/datastar.js"></script>
</head>
<body class="bg-white dark:bg-gray-900 text-lg max-w-4xl mx-auto my-8">
    
    <!-- Navigation Links at the top -->
    <nav class="mb-8 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg shadow-md">
        <div class="flex justify-between items-center">
            <h1 class="text-xl font-bold text-gray-900 dark:text-white">
                ğŸ—ï¸ Infrastructure Management
            </h1>
            <div class="flex space-x-4">
                <a href="/" class="px-3 py-1 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 rounded hover:bg-blue-50 dark:hover:bg-blue-900/20">
                    ğŸ  Home
                </a>
                <a href="/docs/" class="px-3 py-1 text-sm font-medium text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 rounded hover:bg-green-50 dark:hover:bg-green-900/20">
                    ğŸ“š Docs
                </a>
                <a href="/bento-playground" class="px-3 py-1 text-sm font-medium text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200 rounded hover:bg-red-50 dark:hover:bg-red-900/20">
                    ğŸ® Bento Playground
                </a>
                <a href="/metrics" class="px-3 py-1 text-sm font-medium text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200 rounded hover:bg-purple-50 dark:hover:bg-purple-900/20">
                    ğŸ“Š Metrics
                </a>
                <a href="/logs" class="px-3 py-1 text-sm font-medium text-orange-600 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-200 rounded hover:bg-orange-50 dark:hover:bg-orange-900/20">
                    ğŸ“ Logs
                </a>
                <a href="/processes" class="px-3 py-1 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200 rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/20">
                    ğŸ” Processes
                </a>
                <a href="/status" class="px-3 py-1 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 rounded hover:bg-gray-50 dark:hover:bg-gray-900/20">
                    âš¡ Status
                </a>
            </div>
        </div>
    </nav>
    
    <!-- Original DataStar Demo -->
    <div data-signals-delay="400" class="bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400 rounded-lg px-6 py-8 ring shadow-xl ring-gray-900/5 space-y-2 mb-8">
        <div class="flex justify-between items-center">
            <h1 class="text-gray-900 dark:text-white text-3xl font-semibold">
                DataStar SDK Demo
            </h1>
            <img src="https://data-star.dev/static/images/rocket-64x64.png" alt="Rocket" width="64" height="64"/>
        </div>
        <p class="mt-2">
            SSE events will be streamed from the backend to the frontend.
        </p>
        <div class="space-x-2">
            <label for="delay">
                Delay in milliseconds
            </label>
            <input data-bind-delay id="delay" type="number" step="100" min="0" class="w-36 rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-sky-500 focus:outline focus:outline-sky-500 dark:disabled:border-gray-700 dark:disabled:bg-gray-800/20" />
        </div>
        <button data-on-click="@get('/hello-world')" class="rounded-md bg-sky-500 px-5 py-2.5 leading-5 font-semibold text-white hover:bg-sky-700 hover:text-gray-100 cursor-pointer">
            Start TypeWriter
        </button>
        <div class="my-8 text-4xl font-bold text-transparent" style="background: linear-gradient(to right in oklch, red, orange, yellow, green, blue, blue, violet); background-clip: text">
            <div id="message">Hello, world!</div>
        </div>
    </div>

    <!-- NATS + DataStar Demo -->
    <div data-signals-message="" class="bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400 rounded-lg px-6 py-8 ring shadow-xl ring-gray-900/5 space-y-4">
        <div class="flex justify-between items-center">
            <h2 class="text-gray-900 dark:text-white text-2xl font-semibold">
                NATS â†’ DataStar â†’ Browser Demo
            </h2>
            <div class="text-green-500 font-mono text-sm">
                ğŸŸ¢ Embedded NATS Server
            </div>
        </div>
        
        <p class="text-sm">
            This demonstrates the data flow: NATS JetStream â†’ DataStar SSE â†’ Real-time Browser Updates
        </p>

        <!-- Message Input -->
        <div class="space-y-2">
            <label for="messageInput" class="block text-sm font-medium">
                Publish Message to NATS
            </label>
            <div class="flex space-x-2">
                <input 
                    data-bind-message 
                    id="messageInput" 
                    type="text" 
                    placeholder="Enter a message..." 
                    class="flex-1 rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-sky-500 focus:outline focus:outline-sky-500 dark:disabled:border-gray-700 dark:disabled:bg-gray-800/20" 
                />
                <button 
                    data-on-click="@post('/publish', {content: $message})" 
                    class="rounded-md bg-green-500 px-4 py-2 leading-5 font-semibold text-white hover:bg-green-700 hover:text-gray-100 cursor-pointer">
                    Publish
                </button>
            </div>
        </div>

        <!-- Real-time Stream Connection -->
        <div class="space-y-2">
            <button 
                data-on-click="@get('/nats-stream')" 
                class="rounded-md bg-purple-500 px-4 py-2 leading-5 font-semibold text-white hover:bg-purple-700 hover:text-gray-100 cursor-pointer">
                ğŸ”Œ Connect to NATS Stream
            </button>
            <p class="text-xs text-gray-600 dark:text-gray-400">
                Click to start receiving real-time messages from NATS JetStream
            </p>
        </div>

        <!-- Messages Display -->
        <div class="border-t pt-4">
            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">
                ğŸ“¨ Live Messages
            </h3>
            <div id="messages" class="space-y-2 min-h-[100px] max-h-[300px] overflow-y-auto p-3 bg-gray-50 dark:bg-gray-900 rounded border">
                <div class="text-gray-500 italic">Waiting for messages...</div>
            </div>
        </div>

        <!-- Architecture Info -->
        <div class="border-t pt-4 text-xs text-gray-600 dark:text-gray-400 space-y-1">
            <div><strong>Architecture:</strong></div>
            <div>1. ğŸ“ Type message â†’ POST /publish</div>
            <div>2. ğŸ“¡ Go server â†’ NATS JetStream (messages.demo subject)</div>
            <div>3. ğŸ”„ NATS subscription â†’ DataStar SSE</div>
            <div>4. âš¡ SSE â†’ Browser DOM updates</div>
            <div>5. ğŸŒ Real-time UI updates without page refresh</div>
        </div>

        <!-- NATS Info -->
        <div class="border-t pt-2 text-xs text-gray-600 dark:text-gray-400">
            <div>ğŸ“Š Embedded NATS Server with JetStream persistence</div>
        </div>
    </div>

</body>
</html>